{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/communication.ts","src/event.ts","src/handler.ts","src/index.ts"],"names":[],"mappings":"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","file":"page-communication.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// communication module\r\n// module Communication {\r\n\r\n// }\r\nimport { EventEmitter, Event } from './event';\r\n\r\nexport class PageSocket extends EventEmitter {\r\n    private _context: any;\r\n    private _target: string;\r\n\r\n    /**\r\n     * socket communication between pages\r\n     * @param context otherwindow\r\n     * @param target otherwindow origin\r\n     */\r\n    public constructor(context: any, target: string) {\r\n        super();\r\n        this._context = context;\r\n        this._target = target;\r\n        window.addEventListener(\"message\", this.receiveMessage, false);\r\n    }\r\n\r\n    private receiveMessage(event: any) {\r\n        let origin: any = event.origin || event.originalEvent.origin;\r\n        if (origin !== this._target) {\r\n            this.event(Event.Error, \"the target is error!\");\r\n        }\r\n        else {\r\n            this.event(Event.Message, event.data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * send data to the destination page\r\n     * @param data string or arraybuffer\r\n     */\r\n    public send(data: any): void {\r\n        this._context.postMessage(data, this._target);\r\n    }\r\n}","import { Handler } from './handler';\r\n/**\r\n* @author confiner\r\n* @desc 可调度事件的所有类的基类。\r\n*/\r\n\r\n// module Communication {\r\n\r\n// }\r\nexport class Event {\r\n\tpublic static readonly Message: string = \"message\";\r\n\tpublic static readonly Error: string = \"error\";\r\n}\r\nexport class EventEmitter {\r\n\tprivate _eventList: any;\r\n\r\n\t/**\r\n\t * 检查 EvetEmitter 对象是否为特定事件类型注册了任何侦听器。\r\n\t * @param\ttype 事件的类型。\r\n\t * @return 如果指定类型的侦听器已注册，则值为 true；否则，值为 false。\r\n\t */\r\n\tpublic hasListener(type: string): boolean {\r\n\t\tlet listener: Object = this._eventList && this._eventList[type];\r\n\t\treturn !!listener;\r\n\t}\r\n\r\n\t/**\r\n\t * 派发事件。\r\n\t * @param type\t事件类型。\r\n\t * @param data\t（可选）回调数据。<b>注意：</b>如果是需要传递多个参数 p1,p2,p3,...可以使用数组结构如：[p1,p2,p3,...] ；如果需要回调单个参数 p ，且 p 是一个数组，则需要使用结构如：[p]，其他的单个参数 p ，可以直接传入参数 p。\r\n\t * @return 此事件类型是否有侦听者，如果有侦听者则值为 true，否则值为 false。\r\n\t */\r\n\tpublic event(type: string, data: any = null): boolean {\r\n\t\tif (!this._eventList || !this._eventList[type])\r\n\t\t\treturn false;\r\n\r\n\t\tlet listeners: any = this._eventList[type];\r\n\t\tif (listeners.run) {\r\n\t\t\tif (listeners.once) delete this._eventList[type];\r\n\t\t\tdata != null ? listeners.runWith(data) : listeners.run();\r\n\t\t} else {\r\n\t\t\tfor (let i: number = 0, n: number = listeners.length; i < n; i++) {\r\n\t\t\t\tlet listener: Handler = listeners[i];\r\n\t\t\t\tif (listener) {\r\n\t\t\t\t\t(data != null) ? listener.runWith(data) : listener.run();\r\n\t\t\t\t}\r\n\t\t\t\tif (!listener || listener.once) {\r\n\t\t\t\t\tlisteners.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t\tn--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (listeners.length === 0 && this._eventList) delete this._eventList[type];\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * 使用 EventEmmiter 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知。\r\n\t * @param type\t\t事件的类型。\r\n\t * @param caller\t事件侦听函数的执行域。\r\n\t * @param listener\t事件侦听函数。\r\n\t * @param args\t\t（可选）事件侦听函数的回调参数。\r\n\t * @return 此 EvetEmitter 对象。\r\n\t */\r\n\tpublic on(type: string, caller: any, listener: Function, args: any = null): EventEmitter {\r\n\t\treturn this._createListener(type, caller, listener, args, false);\r\n\t}\r\n\r\n\t/**\r\n\t * 使用 EventEmitter 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知，此侦听事件响应一次后自动移除。\r\n\t * @param type\t\t事件的类型。\r\n\t * @param caller\t事件侦听函数的执行域。\r\n\t * @param listener\t事件侦听函数。\r\n\t * @param args\t\t（可选）事件侦听函数的回调参数。\r\n\t * @return 此 EventEmitter 对象。\r\n\t */\r\n\tpublic once(type: string, caller: any, listener: Function, args: any = null): EventEmitter {\r\n\t\treturn this._createListener(type, caller, listener, args, true);\r\n\t}\r\n\r\n\t/**@private */\r\n\tpublic _createListener(type: string, caller: any, listener: Function, args: any, once: boolean, offBefore: Boolean = true): EventEmitter {\r\n\t\t//移除之前相同的监听\r\n\t\toffBefore && this.off(type, caller, listener, once);\r\n\r\n\t\t//使用对象池进行创建回收\r\n\t\tlet handler: Handler = Handler.create(caller || this, listener, args, once);\r\n\t\tthis._eventList || (this._eventList = {});\r\n\r\n\t\tlet events: any = this._eventList;\r\n\t\t//默认单个，每个对象只有多个监听才用数组，节省一个数组的消耗\r\n\t\tif (!events[type]) events[type] = handler;\r\n\t\telse {\r\n\t\t\tif (!events[type].run) events[type].push(handler);\r\n\t\t\telse events[type] = [events[type], handler];\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 从 EventEmitter 对象中删除侦听器。\r\n\t * @param type\t\t事件的类型。\r\n\t * @param caller\t事件侦听函数的执行域。\r\n\t * @param listener\t事件侦听函数。\r\n\t * @param onceOnly\t（可选）如果值为 true ,则只移除通过 once 方法添加的侦听器。\r\n\t * @return 此 EventEmitter 对象。\r\n\t */\r\n\tpublic off(type: string, caller: any, listener: Function, onceOnly: boolean = false): EventEmitter {\r\n\t\tif (!this._eventList || !this._eventList[type]) return this;\r\n\r\n\t\tvar listeners: any = this._eventList[type];\r\n\t\tif (listener != null) {\r\n\t\t\tif (listeners[\"run\"]) {\r\n\t\t\t\tif ((!caller || listeners[\"caller\"] === caller) && listeners[\"method\"] === listener && (!onceOnly || listeners[\"once\"])) {\r\n\t\t\t\t\tdelete this._eventList[type];\r\n\t\t\t\t\tlisteners[\"recover\"].apply(this);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet count: number = 0;\r\n\t\t\t\tlet n: number = listeners[\"length\"];\r\n\t\t\t\tfor (let i: number = 0; i < n; i++) {\r\n\t\t\t\t\tvar item: Handler = listeners[i];\r\n\t\t\t\t\tif (item && (!caller || item.caller === caller) && item.method === listener && (!onceOnly || item.once)) {\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tlisteners[i] = null;\r\n\t\t\t\t\t\titem.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//如果全部移除，则删除索引\r\n\t\t\t\tif (count === n) delete this._eventList[type];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 从 EventEmitter 对象中删除指定事件类型的所有侦听器。\r\n\t * @param type\t（可选）事件类型，如果值为 null，则移除本对象所有类型的侦听器。\r\n\t * @return 此 EventEmitter 对象。\r\n\t */\r\n\tpublic offAll(type: string | null = null): EventEmitter {\r\n\t\tlet events: any = this._eventList;\r\n\t\tif (!events) return this;\r\n\t\tif (type) {\r\n\t\t\tthis._recoverHandlers(events[type]);\r\n\t\t\tdelete events[type];\r\n\t\t} else {\r\n\t\t\tfor (let name in events) {\r\n\t\t\t\tthis._recoverHandlers(events[name]);\r\n\t\t\t}\r\n\t\t\tthis._eventList = null;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate _recoverHandlers(arr: any): void {\r\n\t\tif (!arr) return;\r\n\t\tif (arr.run) {\r\n\t\t\tarr.recover();\r\n\t\t} else {\r\n\t\t\tfor (let i: number = arr.length - 1; i > -1; i--) {\r\n\t\t\t\tif (arr[i]) {\r\n\t\t\t\t\tarr[i].recover();\r\n\t\t\t\t\tarr[i] = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// class EventHandler extends Handler {\r\n\r\n// \t/**@private handler对象池*/\r\n// \tprivate static _eventPool: Array<Handler> = [];\r\n\r\n// \tpublic constructor(caller: any, method: Function, args: any, once: boolean) {\r\n// \t\tsuper();\r\n// \t\tthis.setTo(caller, method, args, once);\r\n// \t}\r\n\r\n// \tpublic recover(): void {\r\n// \t\tif (this._id > 0) {\r\n// \t\t\tthis._id = 0;\r\n// \t\t\tEventHandler._eventPool.push(this.clear());\r\n// \t\t}\r\n// \t}\r\n\r\n// \t/**\r\n// \t * 从对象池内创建一个Handler，默认会执行一次回收，如果不需要自动回收，设置once参数为false。\r\n// \t * @param caller\t执行域(this)。\r\n// \t * @param method\t回调方法。\r\n// \t * @param args\t\t（可选）携带的参数。\r\n// \t * @param once\t\t（可选）是否只执行一次，如果为true，回调后执行recover()进行回收，默认为true。\r\n// \t * @return 返回创建的handler实例。\r\n// \t */\r\n// \tpublic static create(caller: any, method: Function, args: any = null, once: boolean = true): Handler {\r\n// \t\tif (EventHandler._eventPool.length)\r\n// \t\t\treturn (EventHandler._eventPool.pop()).setTo(caller, method, args, once);\r\n// \t\treturn new EventHandler(caller, method, args, once);\r\n// \t}\r\n// }\r\n","// module Communication {\r\n\r\n// }\r\n\r\nexport class Handler {\r\n    private static _pool: Array<any> = [];\r\n    private static _gid: number = 1;\r\n    public caller: any = null;\r\n    public method: Function | null = null;\r\n    public args: Array<any> | null = null;\r\n    public once: Boolean = false;\r\n\r\n    protected _id: number = 0;\r\n\r\n    /**\r\n     * 根据指定的属性值，创建一个 <code>Handler</code> 类的实例。\r\n     * @param\tcaller 执行域。\r\n     * @param\tmethod 处理函数。\r\n     * @param\targs 函数参数。\r\n     * @param\tonce 是否只执行一次。\r\n     */\r\n    public constructor(caller: any = null, method: Function | null = null, args: Array<any> | null = null, once: Boolean = false) {\r\n        this.setTo(caller, method, args, once);\r\n    }\r\n\r\n    /**\r\n     * 设置此对象的指定属性值。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 回调方法。\r\n     * @param\targs 携带的参数。\r\n     * @param\tonce 是否只执行一次，如果为true，执行后执行recover()进行回收。\r\n     * @return  返回 handler 本身。\r\n     */\r\n    public setTo(caller: any, method: Function | null, args: Array<any> | null, once: Boolean): Handler {\r\n        this._id = Handler._gid++;\r\n        this.caller = caller;\r\n        this.method = method;\r\n        this.args = args;\r\n        this.once = once;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 执行处理器。\r\n     */\r\n    public run(): any {\r\n        if (!this.method) return null;\r\n        let id: number = this._id;\r\n        console.log(this.method);\r\n        var result: any = this.method.apply(this.caller, this.args);\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 执行处理器，携带额外数据。\r\n     * @param\tdata 附加的回调数据，Array\r\n     */\r\n    public runWith(data: any): any {\r\n        if (!this.method) return null;\r\n        var id: number = this._id;\r\n        let result: any = null;\r\n        if (!data)\r\n            result = this.method.apply(this.caller, this.args);\r\n        else if (this.args) {\r\n            result = this.method.apply(this.caller, this.args.concat(data));\r\n        }\r\n        else {\r\n            console.log(this.method);\r\n            result = this.method.apply(this.caller, data);\r\n        }\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 清理对象引用。\r\n     */\r\n    public clear(): Handler {\r\n        this.caller = null;\r\n        this.method = null;\r\n        this.args = null;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 清理并回收到 Handler 对象池内。\r\n     */\r\n    public recover(): void {\r\n        if (this._id > 0) {\r\n            this._id = 0;\r\n            Handler._pool.push(this.clear());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从对象池内创建一个Handler，默认会执行一次并立即回收，如果不需要自动回收，设置once参数为false。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 回调方法。\r\n     * @param\targs 携带的参数。\r\n     * @param\tonce 是否只执行一次，如果为true，回调后执行recover()进行回收，默认为true。\r\n     * @return  返回创建的handler实例。\r\n     */\r\n    public static create(caller: any, method: Function, args: any = null, once: Boolean = true): Handler {\r\n        if (Handler._pool.length) return Handler._pool.pop().setTo(caller, method, args, once);\r\n        return new Handler(caller, method, args, once);\r\n    }\r\n}\r\n","export * from \"./communication\";\r\nexport * from \"./event\";\r\nexport * from \"./handler\";\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tbXVuaWNhdGlvbi50cyIsInNyYy9ldmVudC50cyIsInNyYy9oYW5kbGVyLnRzIiwic3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBLElBQUEsVUFBQSxRQUFBLFNBQUEsQ0FBQTtBQUVBLElBQUEsYUFBQSxhQUFBLFVBQUEsTUFBQSxFQUFBO0FBQWdDLGNBQUEsVUFBQSxFQUFBLE1BQUE7QUFJNUI7Ozs7O0FBS0EsYUFBQSxVQUFBLENBQW1CLE9BQW5CLEVBQWlDLE1BQWpDLEVBQStDO0FBQS9DLFlBQUEsUUFDSSxPQUFBLElBQUEsQ0FBQSxJQUFBLEtBQU8sSUFEWDtBQUVJLGNBQUssUUFBTCxHQUFnQixPQUFoQjtBQUNBLGNBQUssT0FBTCxHQUFlLE1BQWY7QUFDQSxlQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLE1BQUssY0FBeEMsRUFBd0QsS0FBeEQ7O0FBQ0g7QUFFTyxlQUFBLFNBQUEsQ0FBQSxjQUFBLEdBQVIsVUFBdUIsS0FBdkIsRUFBaUM7QUFDN0IsWUFBSSxTQUFjLE1BQU0sTUFBTixJQUFnQixNQUFNLGFBQU4sQ0FBb0IsTUFBdEQ7QUFDQSxZQUFJLFdBQVcsS0FBSyxPQUFwQixFQUE2QjtBQUN6QixpQkFBSyxLQUFMLENBQVcsUUFBQSxLQUFBLENBQU0sS0FBakIsRUFBd0Isc0JBQXhCO0FBQ0gsU0FGRCxNQUdLO0FBQ0QsaUJBQUssS0FBTCxDQUFXLFFBQUEsS0FBQSxDQUFNLE9BQWpCLEVBQTBCLE1BQU0sSUFBaEM7QUFDSDtBQUNKLEtBUk87QUFVUjs7OztBQUlPLGVBQUEsU0FBQSxDQUFBLElBQUEsR0FBUCxVQUFZLElBQVosRUFBcUI7QUFDakIsYUFBSyxRQUFMLENBQWMsV0FBZCxDQUEwQixJQUExQixFQUFnQyxLQUFLLE9BQXJDO0FBQ0gs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QUNkLGlCQUFLLEdBQUwsR0FBVyxDQUFYO0FBQ0Esb0JBQVEsS0FBUixDQUFjLElBQWQsQ0FBbUIsS0FBSyxLQUFMLEVBQW5CO0FBQ0g7QUFDSixLQUxNO0FBT1A7Ozs7Ozs7O0FBUWMsWUFBQSxNQUFBLEdBQWQsVUFBcUIsTUFBckIsRUFBa0MsTUFBbEMsRUFBb0QsSUFBcEQsRUFBc0UsSUFBdEUsRUFBMEY7QUFBdEMsWUFBQSxTQUFBLEtBQUEsQ0FBQSxFQUFBO0FBQUEsbUJBQUEsSUFBQTtBQUFnQjtBQUFFLFlBQUEsU0FBQSxLQUFBLENBQUEsRUFBQTtBQUFBLG1CQUFBLElBQUE7QUFBb0I7QUFDdEYsWUFBSSxRQUFRLEtBQVIsQ0FBYyxNQUFsQixFQUEwQixPQUFPLFFBQVEsS0FBUixDQUFjLEdBQWQsR0FBb0IsS0FBcEIsQ0FBMEIsTUFBMUIsRUFBa0MsTUFBbEMsRUFBMEMsSUFBMUMsRUFBZ0QsSUFBaEQsQ0FBUDtBQUMxQixlQUFPLElBQUksT0FBSixDQUFZLE1BQVosRUFBb0IsTUFBcEIsRUFBNEIsSUFBNUIsRUFBa0MsSUFBbEMsQ0FBUDtBQUNILEtBSGE7QUFsR0MsWUFBQSxLQUFBLEdBQW9CLEVBQXBCO0FBQ0EsWUFBQSxJQUFBLEdBQWUsQ0FBZjtBQXFHbkIsV0FBQSxPQUFBO0FBQUMsQ0F2R0QsRUFBQTtBQUFhLFFBQUEsT0FBQSxHQUFBLE9BQUE7Ozs7Ozs7Ozs7O0FDSmIsU0FBQSxRQUFBLGlCQUFBLENBQUE7QUFDQSxTQUFBLFFBQUEsU0FBQSxDQUFBO0FBQ0EsU0FBQSxRQUFBLFdBQUEsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vIGNvbW11bmljYXRpb24gbW9kdWxlXHJcbi8vIG1vZHVsZSBDb21tdW5pY2F0aW9uIHtcclxuXHJcbi8vIH1cclxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBFdmVudCB9IGZyb20gJy4vZXZlbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhZ2VTb2NrZXQgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgcHJpdmF0ZSBfY29udGV4dDogYW55O1xyXG4gICAgcHJpdmF0ZSBfdGFyZ2V0OiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzb2NrZXQgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHBhZ2VzXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCBvdGhlcndpbmRvd1xyXG4gICAgICogQHBhcmFtIHRhcmdldCBvdGhlcndpbmRvdyBvcmlnaW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbnRleHQ6IGFueSwgdGFyZ2V0OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5yZWNlaXZlTWVzc2FnZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVjZWl2ZU1lc3NhZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGxldCBvcmlnaW46IGFueSA9IGV2ZW50Lm9yaWdpbiB8fCBldmVudC5vcmlnaW5hbEV2ZW50Lm9yaWdpbjtcclxuICAgICAgICBpZiAob3JpZ2luICE9PSB0aGlzLl90YXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChFdmVudC5FcnJvciwgXCJ0aGUgdGFyZ2V0IGlzIGVycm9yIVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQoRXZlbnQuTWVzc2FnZSwgZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2VuZCBkYXRhIHRvIHRoZSBkZXN0aW5hdGlvbiBwYWdlXHJcbiAgICAgKiBAcGFyYW0gZGF0YSBzdHJpbmcgb3IgYXJyYXlidWZmZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNlbmQoZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5wb3N0TWVzc2FnZShkYXRhLCB0aGlzLl90YXJnZXQpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlcic7XHJcbi8qKlxyXG4qIEBhdXRob3IgY29uZmluZXJcclxuKiBAZGVzYyDlj6/osIPluqbkuovku7bnmoTmiYDmnInnsbvnmoTln7rnsbvjgIJcclxuKi9cclxuXHJcbi8vIG1vZHVsZSBDb21tdW5pY2F0aW9uIHtcclxuXHJcbi8vIH1cclxuZXhwb3J0IGNsYXNzIEV2ZW50IHtcclxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1lc3NhZ2U6IHN0cmluZyA9IFwibWVzc2FnZVwiO1xyXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRXJyb3I6IHN0cmluZyA9IFwiZXJyb3JcIjtcclxufVxyXG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyIHtcclxuXHRwcml2YXRlIF9ldmVudExpc3Q6IGFueTtcclxuXHJcblx0LyoqXHJcblx0ICog5qOA5p+lIEV2ZXRFbWl0dGVyIOWvueixoeaYr+WQpuS4uueJueWumuS6i+S7tuexu+Wei+azqOWGjOS6huS7u+S9leS+puWQrOWZqOOAglxyXG5cdCAqIEBwYXJhbVx0dHlwZSDkuovku7bnmoTnsbvlnovjgIJcclxuXHQgKiBAcmV0dXJuIOWmguaenOaMh+Wumuexu+Wei+eahOS+puWQrOWZqOW3suazqOWGjO+8jOWImeWAvOS4uiB0cnVl77yb5ZCm5YiZ77yM5YC85Li6IGZhbHNl44CCXHJcblx0ICovXHJcblx0cHVibGljIGhhc0xpc3RlbmVyKHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0bGV0IGxpc3RlbmVyOiBPYmplY3QgPSB0aGlzLl9ldmVudExpc3QgJiYgdGhpcy5fZXZlbnRMaXN0W3R5cGVdO1xyXG5cdFx0cmV0dXJuICEhbGlzdGVuZXI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiDmtL7lj5Hkuovku7bjgIJcclxuXHQgKiBAcGFyYW0gdHlwZVx05LqL5Lu257G75Z6L44CCXHJcblx0ICogQHBhcmFtIGRhdGFcdO+8iOWPr+mAie+8ieWbnuiwg+aVsOaNruOAgjxiPuazqOaEj++8mjwvYj7lpoLmnpzmmK/pnIDopoHkvKDpgJLlpJrkuKrlj4LmlbAgcDEscDIscDMsLi4u5Y+v5Lul5L2/55So5pWw57uE57uT5p6E5aaC77yaW3AxLHAyLHAzLC4uLl0g77yb5aaC5p6c6ZyA6KaB5Zue6LCD5Y2V5Liq5Y+C5pWwIHAg77yM5LiUIHAg5piv5LiA5Liq5pWw57uE77yM5YiZ6ZyA6KaB5L2/55So57uT5p6E5aaC77yaW3Bd77yM5YW25LuW55qE5Y2V5Liq5Y+C5pWwIHAg77yM5Y+v5Lul55u05o6l5Lyg5YWl5Y+C5pWwIHDjgIJcclxuXHQgKiBAcmV0dXJuIOatpOS6i+S7tuexu+Wei+aYr+WQpuacieS+puWQrOiAhe+8jOWmguaenOacieS+puWQrOiAheWImeWAvOS4uiB0cnVl77yM5ZCm5YiZ5YC85Li6IGZhbHNl44CCXHJcblx0ICovXHJcblx0cHVibGljIGV2ZW50KHR5cGU6IHN0cmluZywgZGF0YTogYW55ID0gbnVsbCk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCF0aGlzLl9ldmVudExpc3QgfHwgIXRoaXMuX2V2ZW50TGlzdFt0eXBlXSlcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGxldCBsaXN0ZW5lcnM6IGFueSA9IHRoaXMuX2V2ZW50TGlzdFt0eXBlXTtcclxuXHRcdGlmIChsaXN0ZW5lcnMucnVuKSB7XHJcblx0XHRcdGlmIChsaXN0ZW5lcnMub25jZSkgZGVsZXRlIHRoaXMuX2V2ZW50TGlzdFt0eXBlXTtcclxuXHRcdFx0ZGF0YSAhPSBudWxsID8gbGlzdGVuZXJzLnJ1bldpdGgoZGF0YSkgOiBsaXN0ZW5lcnMucnVuKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb3IgKGxldCBpOiBudW1iZXIgPSAwLCBuOiBudW1iZXIgPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcblx0XHRcdFx0bGV0IGxpc3RlbmVyOiBIYW5kbGVyID0gbGlzdGVuZXJzW2ldO1xyXG5cdFx0XHRcdGlmIChsaXN0ZW5lcikge1xyXG5cdFx0XHRcdFx0KGRhdGEgIT0gbnVsbCkgPyBsaXN0ZW5lci5ydW5XaXRoKGRhdGEpIDogbGlzdGVuZXIucnVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICghbGlzdGVuZXIgfHwgbGlzdGVuZXIub25jZSkge1xyXG5cdFx0XHRcdFx0bGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuXHRcdFx0XHRcdGktLTtcclxuXHRcdFx0XHRcdG4tLTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDAgJiYgdGhpcy5fZXZlbnRMaXN0KSBkZWxldGUgdGhpcy5fZXZlbnRMaXN0W3R5cGVdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICog5L2/55SoIEV2ZW50RW1taXRlciDlr7nosaHms6jlhozmjIflrprnsbvlnovnmoTkuovku7bkvqblkKzlmajlr7nosaHvvIzku6Xkvb/kvqblkKzlmajog73lpJ/mjqXmlLbkuovku7bpgJrnn6XjgIJcclxuXHQgKiBAcGFyYW0gdHlwZVx0XHTkuovku7bnmoTnsbvlnovjgIJcclxuXHQgKiBAcGFyYW0gY2FsbGVyXHTkuovku7bkvqblkKzlh73mlbDnmoTmiafooYzln5/jgIJcclxuXHQgKiBAcGFyYW0gbGlzdGVuZXJcdOS6i+S7tuS+puWQrOWHveaVsOOAglxyXG5cdCAqIEBwYXJhbSBhcmdzXHRcdO+8iOWPr+mAie+8ieS6i+S7tuS+puWQrOWHveaVsOeahOWbnuiwg+WPguaVsOOAglxyXG5cdCAqIEByZXR1cm4g5q2kIEV2ZXRFbWl0dGVyIOWvueixoeOAglxyXG5cdCAqL1xyXG5cdHB1YmxpYyBvbih0eXBlOiBzdHJpbmcsIGNhbGxlcjogYW55LCBsaXN0ZW5lcjogRnVuY3Rpb24sIGFyZ3M6IGFueSA9IG51bGwpOiBFdmVudEVtaXR0ZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2NyZWF0ZUxpc3RlbmVyKHR5cGUsIGNhbGxlciwgbGlzdGVuZXIsIGFyZ3MsIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIOS9v+eUqCBFdmVudEVtaXR0ZXIg5a+56LGh5rOo5YaM5oyH5a6a57G75Z6L55qE5LqL5Lu25L6m5ZCs5Zmo5a+56LGh77yM5Lul5L2/5L6m5ZCs5Zmo6IO95aSf5o6l5pS25LqL5Lu26YCa55+l77yM5q2k5L6m5ZCs5LqL5Lu25ZON5bqU5LiA5qyh5ZCO6Ieq5Yqo56e76Zmk44CCXHJcblx0ICogQHBhcmFtIHR5cGVcdFx05LqL5Lu255qE57G75Z6L44CCXHJcblx0ICogQHBhcmFtIGNhbGxlclx05LqL5Lu25L6m5ZCs5Ye95pWw55qE5omn6KGM5Z+f44CCXHJcblx0ICogQHBhcmFtIGxpc3RlbmVyXHTkuovku7bkvqblkKzlh73mlbDjgIJcclxuXHQgKiBAcGFyYW0gYXJnc1x0XHTvvIjlj6/pgInvvInkuovku7bkvqblkKzlh73mlbDnmoTlm57osIPlj4LmlbDjgIJcclxuXHQgKiBAcmV0dXJuIOatpCBFdmVudEVtaXR0ZXIg5a+56LGh44CCXHJcblx0ICovXHJcblx0cHVibGljIG9uY2UodHlwZTogc3RyaW5nLCBjYWxsZXI6IGFueSwgbGlzdGVuZXI6IEZ1bmN0aW9uLCBhcmdzOiBhbnkgPSBudWxsKTogRXZlbnRFbWl0dGVyIHtcclxuXHRcdHJldHVybiB0aGlzLl9jcmVhdGVMaXN0ZW5lcih0eXBlLCBjYWxsZXIsIGxpc3RlbmVyLCBhcmdzLCB0cnVlKTtcclxuXHR9XHJcblxyXG5cdC8qKkBwcml2YXRlICovXHJcblx0cHVibGljIF9jcmVhdGVMaXN0ZW5lcih0eXBlOiBzdHJpbmcsIGNhbGxlcjogYW55LCBsaXN0ZW5lcjogRnVuY3Rpb24sIGFyZ3M6IGFueSwgb25jZTogYm9vbGVhbiwgb2ZmQmVmb3JlOiBCb29sZWFuID0gdHJ1ZSk6IEV2ZW50RW1pdHRlciB7XHJcblx0XHQvL+enu+mZpOS5i+WJjeebuOWQjOeahOebkeWQrFxyXG5cdFx0b2ZmQmVmb3JlICYmIHRoaXMub2ZmKHR5cGUsIGNhbGxlciwgbGlzdGVuZXIsIG9uY2UpO1xyXG5cclxuXHRcdC8v5L2/55So5a+56LGh5rGg6L+b6KGM5Yib5bu65Zue5pS2XHJcblx0XHRsZXQgaGFuZGxlcjogSGFuZGxlciA9IEhhbmRsZXIuY3JlYXRlKGNhbGxlciB8fCB0aGlzLCBsaXN0ZW5lciwgYXJncywgb25jZSk7XHJcblx0XHR0aGlzLl9ldmVudExpc3QgfHwgKHRoaXMuX2V2ZW50TGlzdCA9IHt9KTtcclxuXHJcblx0XHRsZXQgZXZlbnRzOiBhbnkgPSB0aGlzLl9ldmVudExpc3Q7XHJcblx0XHQvL+m7mOiupOWNleS4qu+8jOavj+S4quWvueixoeWPquacieWkmuS4quebkeWQrOaJjeeUqOaVsOe7hO+8jOiKguecgeS4gOS4quaVsOe7hOeahOa2iOiAl1xyXG5cdFx0aWYgKCFldmVudHNbdHlwZV0pIGV2ZW50c1t0eXBlXSA9IGhhbmRsZXI7XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0aWYgKCFldmVudHNbdHlwZV0ucnVuKSBldmVudHNbdHlwZV0ucHVzaChoYW5kbGVyKTtcclxuXHRcdFx0ZWxzZSBldmVudHNbdHlwZV0gPSBbZXZlbnRzW3R5cGVdLCBoYW5kbGVyXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICog5LuOIEV2ZW50RW1pdHRlciDlr7nosaHkuK3liKDpmaTkvqblkKzlmajjgIJcclxuXHQgKiBAcGFyYW0gdHlwZVx0XHTkuovku7bnmoTnsbvlnovjgIJcclxuXHQgKiBAcGFyYW0gY2FsbGVyXHTkuovku7bkvqblkKzlh73mlbDnmoTmiafooYzln5/jgIJcclxuXHQgKiBAcGFyYW0gbGlzdGVuZXJcdOS6i+S7tuS+puWQrOWHveaVsOOAglxyXG5cdCAqIEBwYXJhbSBvbmNlT25seVx077yI5Y+v6YCJ77yJ5aaC5p6c5YC85Li6IHRydWUgLOWImeWPquenu+mZpOmAmui/hyBvbmNlIOaWueazlea3u+WKoOeahOS+puWQrOWZqOOAglxyXG5cdCAqIEByZXR1cm4g5q2kIEV2ZW50RW1pdHRlciDlr7nosaHjgIJcclxuXHQgKi9cclxuXHRwdWJsaWMgb2ZmKHR5cGU6IHN0cmluZywgY2FsbGVyOiBhbnksIGxpc3RlbmVyOiBGdW5jdGlvbiwgb25jZU9ubHk6IGJvb2xlYW4gPSBmYWxzZSk6IEV2ZW50RW1pdHRlciB7XHJcblx0XHRpZiAoIXRoaXMuX2V2ZW50TGlzdCB8fCAhdGhpcy5fZXZlbnRMaXN0W3R5cGVdKSByZXR1cm4gdGhpcztcclxuXHJcblx0XHR2YXIgbGlzdGVuZXJzOiBhbnkgPSB0aGlzLl9ldmVudExpc3RbdHlwZV07XHJcblx0XHRpZiAobGlzdGVuZXIgIT0gbnVsbCkge1xyXG5cdFx0XHRpZiAobGlzdGVuZXJzW1wicnVuXCJdKSB7XHJcblx0XHRcdFx0aWYgKCghY2FsbGVyIHx8IGxpc3RlbmVyc1tcImNhbGxlclwiXSA9PT0gY2FsbGVyKSAmJiBsaXN0ZW5lcnNbXCJtZXRob2RcIl0gPT09IGxpc3RlbmVyICYmICghb25jZU9ubHkgfHwgbGlzdGVuZXJzW1wib25jZVwiXSkpIHtcclxuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9ldmVudExpc3RbdHlwZV07XHJcblx0XHRcdFx0XHRsaXN0ZW5lcnNbXCJyZWNvdmVyXCJdLmFwcGx5KHRoaXMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsZXQgY291bnQ6IG51bWJlciA9IDA7XHJcblx0XHRcdFx0bGV0IG46IG51bWJlciA9IGxpc3RlbmVyc1tcImxlbmd0aFwiXTtcclxuXHRcdFx0XHRmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbjsgaSsrKSB7XHJcblx0XHRcdFx0XHR2YXIgaXRlbTogSGFuZGxlciA9IGxpc3RlbmVyc1tpXTtcclxuXHRcdFx0XHRcdGlmIChpdGVtICYmICghY2FsbGVyIHx8IGl0ZW0uY2FsbGVyID09PSBjYWxsZXIpICYmIGl0ZW0ubWV0aG9kID09PSBsaXN0ZW5lciAmJiAoIW9uY2VPbmx5IHx8IGl0ZW0ub25jZSkpIHtcclxuXHRcdFx0XHRcdFx0Y291bnQrKztcclxuXHRcdFx0XHRcdFx0bGlzdGVuZXJzW2ldID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0aXRlbS5yZWNvdmVyKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL+WmguaenOWFqOmDqOenu+mZpO+8jOWImeWIoOmZpOe0ouW8lVxyXG5cdFx0XHRcdGlmIChjb3VudCA9PT0gbikgZGVsZXRlIHRoaXMuX2V2ZW50TGlzdFt0eXBlXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICog5LuOIEV2ZW50RW1pdHRlciDlr7nosaHkuK3liKDpmaTmjIflrprkuovku7bnsbvlnovnmoTmiYDmnInkvqblkKzlmajjgIJcclxuXHQgKiBAcGFyYW0gdHlwZVx077yI5Y+v6YCJ77yJ5LqL5Lu257G75Z6L77yM5aaC5p6c5YC85Li6IG51bGzvvIzliJnnp7vpmaTmnKzlr7nosaHmiYDmnInnsbvlnovnmoTkvqblkKzlmajjgIJcclxuXHQgKiBAcmV0dXJuIOatpCBFdmVudEVtaXR0ZXIg5a+56LGh44CCXHJcblx0ICovXHJcblx0cHVibGljIG9mZkFsbCh0eXBlOiBzdHJpbmcgfCBudWxsID0gbnVsbCk6IEV2ZW50RW1pdHRlciB7XHJcblx0XHRsZXQgZXZlbnRzOiBhbnkgPSB0aGlzLl9ldmVudExpc3Q7XHJcblx0XHRpZiAoIWV2ZW50cykgcmV0dXJuIHRoaXM7XHJcblx0XHRpZiAodHlwZSkge1xyXG5cdFx0XHR0aGlzLl9yZWNvdmVySGFuZGxlcnMoZXZlbnRzW3R5cGVdKTtcclxuXHRcdFx0ZGVsZXRlIGV2ZW50c1t0eXBlXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZvciAobGV0IG5hbWUgaW4gZXZlbnRzKSB7XHJcblx0XHRcdFx0dGhpcy5fcmVjb3ZlckhhbmRsZXJzKGV2ZW50c1tuYW1lXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fZXZlbnRMaXN0ID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBfcmVjb3ZlckhhbmRsZXJzKGFycjogYW55KTogdm9pZCB7XHJcblx0XHRpZiAoIWFycikgcmV0dXJuO1xyXG5cdFx0aWYgKGFyci5ydW4pIHtcclxuXHRcdFx0YXJyLnJlY292ZXIoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZvciAobGV0IGk6IG51bWJlciA9IGFyci5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xyXG5cdFx0XHRcdGlmIChhcnJbaV0pIHtcclxuXHRcdFx0XHRcdGFycltpXS5yZWNvdmVyKCk7XHJcblx0XHRcdFx0XHRhcnJbaV0gPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuLy8gY2xhc3MgRXZlbnRIYW5kbGVyIGV4dGVuZHMgSGFuZGxlciB7XHJcblxyXG4vLyBcdC8qKkBwcml2YXRlIGhhbmRsZXLlr7nosaHmsaAqL1xyXG4vLyBcdHByaXZhdGUgc3RhdGljIF9ldmVudFBvb2w6IEFycmF5PEhhbmRsZXI+ID0gW107XHJcblxyXG4vLyBcdHB1YmxpYyBjb25zdHJ1Y3RvcihjYWxsZXI6IGFueSwgbWV0aG9kOiBGdW5jdGlvbiwgYXJnczogYW55LCBvbmNlOiBib29sZWFuKSB7XHJcbi8vIFx0XHRzdXBlcigpO1xyXG4vLyBcdFx0dGhpcy5zZXRUbyhjYWxsZXIsIG1ldGhvZCwgYXJncywgb25jZSk7XHJcbi8vIFx0fVxyXG5cclxuLy8gXHRwdWJsaWMgcmVjb3ZlcigpOiB2b2lkIHtcclxuLy8gXHRcdGlmICh0aGlzLl9pZCA+IDApIHtcclxuLy8gXHRcdFx0dGhpcy5faWQgPSAwO1xyXG4vLyBcdFx0XHRFdmVudEhhbmRsZXIuX2V2ZW50UG9vbC5wdXNoKHRoaXMuY2xlYXIoKSk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fVxyXG5cclxuLy8gXHQvKipcclxuLy8gXHQgKiDku47lr7nosaHmsaDlhoXliJvlu7rkuIDkuKpIYW5kbGVy77yM6buY6K6k5Lya5omn6KGM5LiA5qyh5Zue5pS277yM5aaC5p6c5LiN6ZyA6KaB6Ieq5Yqo5Zue5pS277yM6K6+572ub25jZeWPguaVsOS4umZhbHNl44CCXHJcbi8vIFx0ICogQHBhcmFtIGNhbGxlclx05omn6KGM5Z+fKHRoaXMp44CCXHJcbi8vIFx0ICogQHBhcmFtIG1ldGhvZFx05Zue6LCD5pa55rOV44CCXHJcbi8vIFx0ICogQHBhcmFtIGFyZ3NcdFx077yI5Y+v6YCJ77yJ5pC65bim55qE5Y+C5pWw44CCXHJcbi8vIFx0ICogQHBhcmFtIG9uY2VcdFx077yI5Y+v6YCJ77yJ5piv5ZCm5Y+q5omn6KGM5LiA5qyh77yM5aaC5p6c5Li6dHJ1Ze+8jOWbnuiwg+WQjuaJp+ihjHJlY292ZXIoKei/m+ihjOWbnuaUtu+8jOm7mOiupOS4unRydWXjgIJcclxuLy8gXHQgKiBAcmV0dXJuIOi/lOWbnuWIm+W7uueahGhhbmRsZXLlrp7kvovjgIJcclxuLy8gXHQgKi9cclxuLy8gXHRwdWJsaWMgc3RhdGljIGNyZWF0ZShjYWxsZXI6IGFueSwgbWV0aG9kOiBGdW5jdGlvbiwgYXJnczogYW55ID0gbnVsbCwgb25jZTogYm9vbGVhbiA9IHRydWUpOiBIYW5kbGVyIHtcclxuLy8gXHRcdGlmIChFdmVudEhhbmRsZXIuX2V2ZW50UG9vbC5sZW5ndGgpXHJcbi8vIFx0XHRcdHJldHVybiAoRXZlbnRIYW5kbGVyLl9ldmVudFBvb2wucG9wKCkpLnNldFRvKGNhbGxlciwgbWV0aG9kLCBhcmdzLCBvbmNlKTtcclxuLy8gXHRcdHJldHVybiBuZXcgRXZlbnRIYW5kbGVyKGNhbGxlciwgbWV0aG9kLCBhcmdzLCBvbmNlKTtcclxuLy8gXHR9XHJcbi8vIH1cclxuIiwiLy8gbW9kdWxlIENvbW11bmljYXRpb24ge1xyXG5cclxuLy8gfVxyXG5cclxuZXhwb3J0IGNsYXNzIEhhbmRsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX3Bvb2w6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIHByaXZhdGUgc3RhdGljIF9naWQ6IG51bWJlciA9IDE7XHJcbiAgICBwdWJsaWMgY2FsbGVyOiBhbnkgPSBudWxsO1xyXG4gICAgcHVibGljIG1ldGhvZDogRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcclxuICAgIHB1YmxpYyBhcmdzOiBBcnJheTxhbnk+IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwdWJsaWMgb25jZTogQm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHByb3RlY3RlZCBfaWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7mjIflrprnmoTlsZ7mgKflgLzvvIzliJvlu7rkuIDkuKogPGNvZGU+SGFuZGxlcjwvY29kZT4g57G755qE5a6e5L6L44CCXHJcbiAgICAgKiBAcGFyYW1cdGNhbGxlciDmiafooYzln5/jgIJcclxuICAgICAqIEBwYXJhbVx0bWV0aG9kIOWkhOeQhuWHveaVsOOAglxyXG4gICAgICogQHBhcmFtXHRhcmdzIOWHveaVsOWPguaVsOOAglxyXG4gICAgICogQHBhcmFtXHRvbmNlIOaYr+WQpuWPquaJp+ihjOS4gOasoeOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY2FsbGVyOiBhbnkgPSBudWxsLCBtZXRob2Q6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGwsIGFyZ3M6IEFycmF5PGFueT4gfCBudWxsID0gbnVsbCwgb25jZTogQm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRUbyhjYWxsZXIsIG1ldGhvZCwgYXJncywgb25jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mraTlr7nosaHnmoTmjIflrprlsZ7mgKflgLzjgIJcclxuICAgICAqIEBwYXJhbVx0Y2FsbGVyIOaJp+ihjOWfnyh0aGlzKeOAglxyXG4gICAgICogQHBhcmFtXHRtZXRob2Qg5Zue6LCD5pa55rOV44CCXHJcbiAgICAgKiBAcGFyYW1cdGFyZ3Mg5pC65bim55qE5Y+C5pWw44CCXHJcbiAgICAgKiBAcGFyYW1cdG9uY2Ug5piv5ZCm5Y+q5omn6KGM5LiA5qyh77yM5aaC5p6c5Li6dHJ1Ze+8jOaJp+ihjOWQjuaJp+ihjHJlY292ZXIoKei/m+ihjOWbnuaUtuOAglxyXG4gICAgICogQHJldHVybiAg6L+U5ZueIGhhbmRsZXIg5pys6Lqr44CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUbyhjYWxsZXI6IGFueSwgbWV0aG9kOiBGdW5jdGlvbiB8IG51bGwsIGFyZ3M6IEFycmF5PGFueT4gfCBudWxsLCBvbmNlOiBCb29sZWFuKTogSGFuZGxlciB7XHJcbiAgICAgICAgdGhpcy5faWQgPSBIYW5kbGVyLl9naWQrKztcclxuICAgICAgICB0aGlzLmNhbGxlciA9IGNhbGxlcjtcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xyXG4gICAgICAgIHRoaXMub25jZSA9IG9uY2U7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzlpITnkIblmajjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJ1bigpOiBhbnkge1xyXG4gICAgICAgIGlmICghdGhpcy5tZXRob2QpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGxldCBpZDogbnVtYmVyID0gdGhpcy5faWQ7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXRob2QpO1xyXG4gICAgICAgIHZhciByZXN1bHQ6IGFueSA9IHRoaXMubWV0aG9kLmFwcGx5KHRoaXMuY2FsbGVyLCB0aGlzLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2lkID09PSBpZCAmJiB0aGlzLm9uY2UgJiYgdGhpcy5yZWNvdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJp+ihjOWkhOeQhuWZqO+8jOaQuuW4pumineWkluaVsOaNruOAglxyXG4gICAgICogQHBhcmFtXHRkYXRhIOmZhOWKoOeahOWbnuiwg+aVsOaNru+8jEFycmF5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBydW5XaXRoKGRhdGE6IGFueSk6IGFueSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldGhvZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIGlkOiBudW1iZXIgPSB0aGlzLl9pZDtcclxuICAgICAgICBsZXQgcmVzdWx0OiBhbnkgPSBudWxsO1xyXG4gICAgICAgIGlmICghZGF0YSlcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5tZXRob2QuYXBwbHkodGhpcy5jYWxsZXIsIHRoaXMuYXJncyk7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMubWV0aG9kLmFwcGx5KHRoaXMuY2FsbGVyLCB0aGlzLmFyZ3MuY29uY2F0KGRhdGEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubWV0aG9kKTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5tZXRob2QuYXBwbHkodGhpcy5jYWxsZXIsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pZCA9PT0gaWQgJiYgdGhpcy5vbmNlICYmIHRoaXMucmVjb3ZlcigpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXnkIblr7nosaHlvJXnlKjjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyKCk6IEhhbmRsZXIge1xyXG4gICAgICAgIHRoaXMuY2FsbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hcmdzID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4heeQhuW5tuWbnuaUtuWIsCBIYW5kbGVyIOWvueixoeaxoOWGheOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVjb3ZlcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5faWQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkID0gMDtcclxuICAgICAgICAgICAgSGFuZGxlci5fcG9vbC5wdXNoKHRoaXMuY2xlYXIoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LuO5a+56LGh5rGg5YaF5Yib5bu65LiA5LiqSGFuZGxlcu+8jOm7mOiupOS8muaJp+ihjOS4gOasoeW5tueri+WNs+WbnuaUtu+8jOWmguaenOS4jemcgOimgeiHquWKqOWbnuaUtu+8jOiuvue9rm9uY2Xlj4LmlbDkuLpmYWxzZeOAglxyXG4gICAgICogQHBhcmFtXHRjYWxsZXIg5omn6KGM5Z+fKHRoaXMp44CCXHJcbiAgICAgKiBAcGFyYW1cdG1ldGhvZCDlm57osIPmlrnms5XjgIJcclxuICAgICAqIEBwYXJhbVx0YXJncyDmkLrluKbnmoTlj4LmlbDjgIJcclxuICAgICAqIEBwYXJhbVx0b25jZSDmmK/lkKblj6rmiafooYzkuIDmrKHvvIzlpoLmnpzkuLp0cnVl77yM5Zue6LCD5ZCO5omn6KGMcmVjb3Zlcigp6L+b6KGM5Zue5pS277yM6buY6K6k5Li6dHJ1ZeOAglxyXG4gICAgICogQHJldHVybiAg6L+U5Zue5Yib5bu655qEaGFuZGxlcuWunuS+i+OAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShjYWxsZXI6IGFueSwgbWV0aG9kOiBGdW5jdGlvbiwgYXJnczogYW55ID0gbnVsbCwgb25jZTogQm9vbGVhbiA9IHRydWUpOiBIYW5kbGVyIHtcclxuICAgICAgICBpZiAoSGFuZGxlci5fcG9vbC5sZW5ndGgpIHJldHVybiBIYW5kbGVyLl9wb29sLnBvcCgpLnNldFRvKGNhbGxlciwgbWV0aG9kLCBhcmdzLCBvbmNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZXIoY2FsbGVyLCBtZXRob2QsIGFyZ3MsIG9uY2UpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gXCIuL2NvbW11bmljYXRpb25cIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vZXZlbnRcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vaGFuZGxlclwiO1xyXG4iXX0="}